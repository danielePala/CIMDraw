var route=function(){"use strict";var e=function(e){e=e||{};var t={},n=Array.prototype.slice;Object.defineProperties(e,{on:{value:function(n,r){if(typeof r=="function"){(t[n]=t[n]||[]).push(r)}return e},enumerable:false,writable:false,configurable:false},off:{value:function(n,r){if(n=="*"&&!r){t={}}else{if(r){var i=t[n];for(var f=0,a;a=i&&i[f];++f){if(a==r){i.splice(f--,1)}}}else{delete t[n]}}return e},enumerable:false,writable:false,configurable:false},one:{value:function(t,n){function r(){e.off(t,r);n.apply(e,arguments)}return e.on(t,r)},enumerable:false,writable:false,configurable:false},trigger:{value:function(r){var i=arguments;var f=arguments.length-1,a=new Array(f),u,o,c;for(c=0;c<f;c++){a[c]=i[c+1]}u=n.call(t[r]||[],0);for(c=0;o=u[c];++c){o.apply(e,a)}if(t["*"]&&r!="*"){e.trigger.apply(e,["*",r].concat(a))}return e},enumerable:false,writable:false,configurable:false}});return e};var t=/^.+?\/\/+[^/]+/,n="EventListener",r="remove"+n,i="add"+n,f="hasAttribute",a="popstate",u="hashchange",o="trigger",c=3,l=typeof window!="undefined"&&window,s=typeof document!="undefined"&&document,h=l&&history,p=l&&(h.location||l.location),d=P.prototype,v=s&&s.ontouchstart?"touchstart":"click",m=e();var y=false,b=false,g,w,$,A,S,x=[],K=0;function N(e){return e.split(/[/?#]/)}function O(e,t){var n=t.replace(/\?/g,"\\?").replace(/\*/g,"([^/?#]+?)").replace(/\.\./,".*");var r=new RegExp("^"+n+"$");var i=e.match(r);if(i){return i.slice(1)}}function T(e,t){var n;return function(){clearTimeout(n);n=setTimeout(e,t)}}function E(e){g=T(L,1);l[i](a,g);l[i](u,g);s[i](v,R);if(e){L(true)}}function P(){this.$=[];e(this);m.on("stop",this.s.bind(this));m.on("emit",this.e.bind(this))}function j(e){return e.replace(/^\/|\/$/,"")}function k(e){return typeof e=="string"}function q(e){return(e||p.href).replace(t,"")}function D(e){return w[0]==="#"?(e||p.href||"").split(w)[1]||"":(p?q(e):e||"").replace(w,"")}function L(e){var t=K===0;if(c<=K){return}K++;x.push(function(){var t=D();if(e||t!==$){m[o]("emit",t);$=t}});if(t){var n;while(n=x.shift()){n()}K=0}}function R(e){if(e.which!==1||e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented){return}var n=e.target;while(n&&n.nodeName!=="A"){n=n.parentNode}if(!n||n.nodeName!=="A"||n[f]("download")||!n[f]("href")||n.target&&n.target!=="_self"||n.href.indexOf(p.href.match(t)[0])===-1){return}if(n.href!==p.href&&(n.href.split("#")[0]===p.href.split("#")[0]||w[0]!=="#"&&q(n.href).indexOf(w)!==0||w[0]==="#"&&n.href.split(w)[0]!==p.href.split(w)[0]||!_(D(n.href),n.title||s.title))){return}e.preventDefault()}function _(e,t,n){if(!h){return m[o]("emit",D(e))}e=w+j(e);t=t||s.title;n?h.replaceState(null,t,e):h.pushState(null,t,e);s.title=t;b=false;L();return b}d.m=function(e,t,n){if(k(e)&&(!t||k(t))){_(e,t,n||false)}else if(t){this.r(e,t)}else{this.r("@",e)}};d.s=function(){this.off("*");this.$=[]};d.e=function(e){this.$.concat("@").some(function(t){var n=(t==="@"?A:S)(j(e),j(t));if(typeof n!="undefined"){this[o].apply(null,[t].concat(n));return b=true}},this)};d.r=function(e,t){if(e!=="@"){e="/"+j(e);this.$.push(e)}this.on(e,t)};var z=new P;var B=z.m.bind(z);B.create=function(){var e=new P;var t=e.m.bind(e);t.stop=e.s.bind(e);return t};B.base=function(e){w=e||"#";$=D()};B.exec=function(){L(true)};B.parser=function(e,t){if(!e&&!t){A=N;S=O}if(e){A=e}if(t){S=t}};B.query=function(){var e={};var t=p.href||$;t.replace(/[?&](.+?)=([^&]*)/g,function(t,n,r){e[n]=r});return e};B.stop=function(){if(y){if(l){l[r](a,g);l[r](u,g);s[r](v,R)}m[o]("stop");y=false}};B.start=function(e){if(!y){if(l){if(document.readyState==="interactive"||document.readyState==="complete"){E(e)}else{document.onreadystatechange=function(){if(document.readyState==="interactive"){setTimeout(function(){E(e)},1)}}}}y=true}};B.base();B.parser();return B}();